# Database Schema & Models Mangoose

- create a free cluster in the mangodb official website - mango atlas
- install mangoose library
- connect  your application to database <connectionURL>/devTinder
- call the connectDb function  and connect to database before starting application on 3000
- create a userSchema  ans userModel(give me the steps with an example)
- read more about id in mangodb and __v what is that 
- create /signup API to add data to database
- push some documents using  API calls using postman and save the data 


# üöÄ MongoDB + Mongoose User Signup API

This project demonstrates how to build a simple user signup API using **Node.js**, **Express**, **MongoDB Atlas**, and **Mongoose**. It covers database connection, schema creation, API development, and testing with Postman.

---

## üì¶ Prerequisites

- Node.js installed
- MongoDB Atlas account
- Code editor (VS Code recommended)
- Postman (for API testing)

---

## üõ†Ô∏è Step 1: Create a Free Cluster on MongoDB Atlas

1. Visit: [https://www.mongodb.com/cloud/atlas](https://www.mongodb.com/cloud/atlas)
2. Sign in and click **"Build a Database"**
3. Choose the **Free Shared Cluster (M0)**
4. Select a cloud provider and region (e.g., AWS ‚Üí Mumbai)
5. Name your cluster (e.g., `Cluster0`) and create
6. Add a **Database User** with username/password
7. Whitelist your IP address (or use "Allow from anywhere")
8. Click **Connect** ‚Üí Choose "Connect your application" ‚Üí Copy the **connection string**

---

## üì¶ Step 2: Initialize Project & Install Dependencies

```bash
mkdir devTinder
cd devTinder
npm init -y
npm install express mongoose
```

---

## üîå Step 3: Connect to MongoDB Atlas

### `config/database.js`

```js
const mongoose = require('mongoose');

const connectDB = async () => {
  try {
    await mongoose.connect('your_connection_url_here/devTinder', {
      useNewUrlParser: true,
      useUnifiedTopology: true,
    });
    console.log('‚úÖ Database connection established...');
  } catch (err) {
    console.error('‚ùå Database connection failed:', err);
    process.exit(1);
  }
};

module.exports = connectDB;
```

> Replace `'your_connection_url_here'` with your copied Atlas connection string.

---

## üß¨ Step 4: Create User Schema & Model

### `models/user.js`

```js
const mongoose = require('mongoose');

const userSchema = new mongoose.Schema({
  firstName: { type: String, required: true },
  lastName:  { type: String, required: true },
  email:     { type: String, required: true, unique: true },
  password:  { type: String, required: true },
  age:       { type: Number, required: true },
  gender:    { type: String, required: true }
});

module.exports = mongoose.model('User', userSchema);
```

---

## üìÑ Step 5: Create `/signup` API Route

### `app.js`

```js
const express = require('express');
const connectDB = require('./config/database');
const User = require('./models/user');

const app = express();
app.use(express.json());

app.post("/signup", async (req, res) => {
  try {
    const { firstName, lastName, email, password, age, gender } = req.body;

    const existingUser = await User.findOne({ email });
    if (existingUser) {
      return res.status(400).send("User with this email already exists.");
    }

    const user = new User({ firstName, lastName, email, password, age, gender });
    await user.save();
    res.send("User created successfully.");
  } catch (err) {
    console.error(err);
    res.status(500).send("Internal server error.");
  }
});

connectDB().then(() => {
  app.listen(3000, () => {
    console.log("Server running at http://localhost:3000");
  });
});
```

---

## üì© Step 6: Test API Using Postman

- **URL**: `http://localhost:3000/signup`
- **Method**: `POST`
- **Headers**: `Content-Type: application/json`
- **Body (raw JSON)**:

```json
{
  "firstName": "Likhitha",
  "lastName": "J",
  "email": "likhithaj22@gmail.com",
  "password": "likhitha123",
  "age": 22,
  "gender": "female"
}
```

> üü¢ Response: `User created successfully.`  
> üîÅ If repeated: `User with this email already exists.`

---

## üìö Extra: Understanding `_id` and `__v` Fields in MongoDB

### üî∏ `_id`
- Every MongoDB document has a unique `_id` field.
- Automatically generated by MongoDB if not provided.
- Type: `ObjectId`.

### üî∏ `__v`
- Internal version key added by Mongoose.
- Tracks the number of times a document has been modified.
- Useful for concurrency control.

---

## ‚úÖ Summary

| Step | Task |
|------|------|
| ‚úÖ 1 | Set up MongoDB Atlas |
| ‚úÖ 2 | Install and configure Mongoose |
| ‚úÖ 3 | Connect to the database |
| ‚úÖ 4 | Create user schema & model |
| ‚úÖ 5 | Build `/signup` API |
| ‚úÖ 6 | Test using Postman |

---

## üîê Next Steps

- Add validation with Joi or express-validator
- Implement password hashing with bcrypt
- Add login API with JWT authentication
- Connect frontend (React or other) to your backend

---

> Made with ‚ù§Ô∏è using Node.js, MongoDB, and Mongoose
